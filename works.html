<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sai Karun Nandipati | Research Library</title>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        display: ['"Cinzel"', 'serif'],
                        sans: ['"Lato"', 'sans-serif'],
                    },
                    colors: {
                        'shelf-dark': '#2d1b15',
                        'shelf-light': '#4a3228',
                        'gold-accent': '#d4af37',
                        'paper-cream': '#fdfbf7',
                    },
                    backgroundImage: {
                        'leather-texture': "url('https://www.transparenttextures.com/patterns/black-leather.png')",
                        'wood-pattern': "linear-gradient(to bottom, #4a3228 0%, #2d1b15 100%)"
                    }
                }
            }
        }
    </script>

    <!-- Three.js for Loader -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <!-- D3.js for Network Graph -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <link rel="stylesheet" href="css/library.css">
</head>

<body class="selection:bg-gold-accent selection:text-black" onclick="closePopover(event)">

    <!-- LOADER -->
    <div id="loader">
        <div class="text-center">
            <h2 class="font-display text-2xl text-white tracking-[0.3em] mb-4 text-glow">
                WORKS <span class="text-accent-primary">LIBRARY</span>
            </h2>
            <div class="w-64 h-1 bg-white/10 rounded-full overflow-hidden relative">
                <div id="loader-bar" class="h-full bg-accent-primary loader-bar"></div>
            </div>
            <div id="loader-text" class="mt-2 font-mono text-[10px] text-gold tracking-widest">
                LOADING DATABASE...
            </div>
        </div>
    </div>

    <!-- Navbar / Controls -->
    <nav class="control-panel">
        <div class="container mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-6">
                <a href="index.html" class="flex items-center gap-4 group">
                    <img src="https://i1.rgstatic.net/ii/profile.image/11431281770992354-1765018931962_Q512/Sai-Karun-Nandipati.jpg"
                        class="w-12 h-12 rounded-full border-2 border-gold-accent shadow-md group-hover:scale-105 transition">
                    <div>
                        <h1 class="font-display text-xl text-gold-accent">Sai Karun <span
                                class="text-white">Nandipati</span></h1>
                        <p class="text-[10px] text-gray-400 font-sans tracking-[0.2em] uppercase">Research Library</p>
                    </div>
                </a>

                <!-- Main Nav -->
                <div class="hidden md:flex items-center gap-6 ml-6 border-l border-gold-accent/20 pl-6 h-8">
                    <a href="index.html"
                        class="text-xs font-bold text-gray-400 hover:text-gold-accent tracking-widest uppercase transition">Home</a>
                    <a href="projects.html"
                        class="text-xs font-bold text-gray-400 hover:text-gold-accent tracking-widest uppercase transition">Projects</a>
                    <a href="services.html"
                        class="text-xs font-bold text-gray-400 hover:text-gold-accent tracking-widest uppercase transition">Services</a>
                    <a href="works.html"
                        class="text-xs font-bold text-gold-accent tracking-widest uppercase border-b border-gold-accent pb-0.5">Works</a>
                </div>
            </div>

            <!-- Search & Filters -->
            <div class="flex flex-col md:flex-row items-center gap-4 w-full md:w-auto">
                <div class="relative w-full md:w-64">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gold-accent/50 text-xs"></i>
                    <input type="text" id="searchInput" placeholder="Search titles..."
                        class="w-full bg-black/30 border border-gold-accent/30 rounded-full py-1.5 pl-10 pr-4 text-xs text-white focus:border-gold-accent focus:outline-none transition">
                </div>

                <div class="flex bg-black/30 rounded-lg p-1 border border-gold-accent/20">
                    <button onclick="filterBooks('all')"
                        class="filter-btn active px-3 py-1.5 rounded text-[10px] font-bold tracking-wider hover:bg-gold-accent/10 transition text-white">ALL</button>
                    <button onclick="filterBooks('Research Paper')"
                        class="filter-btn px-3 py-1.5 rounded text-[10px] font-bold tracking-wider hover:bg-gold-accent/10 transition text-gray-400">PAPERS</button>
                    <button onclick="filterBooks('Book')"
                        class="filter-btn px-3 py-1.5 rounded text-[10px] font-bold tracking-wider hover:bg-gold-accent/10 transition text-gray-400">BOOKS</button>
                    <button onclick="filterBooks('Patent')"
                        class="filter-btn px-3 py-1.5 rounded text-[10px] font-bold tracking-wider hover:bg-gold-accent/10 transition text-gray-400">PATENTS</button>
                    <button onclick="filterBooks('Peer Review')"
                        class="filter-btn px-3 py-1.5 rounded text-[10px] font-bold tracking-wider hover:bg-gold-accent/10 transition text-gray-400">REVIEWS</button>
                </div>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="bg-[#1a110e] border-b border-gold-accent/20 py-1.5 text-center">
            <div
                class="container mx-auto flex justify-center gap-8 text-[10px] text-gray-500 font-sans tracking-widest uppercase">
                <span id="total-works">42 Works Indexed</span>
                <span class="text-gold-accent"><i class="fas fa-star mr-1"></i> Highly Cited</span>
                <span><i class="fas fa-book mr-1"></i> Faculty Publications</span>
            </div>
        </div>
    </nav>

    <!-- Main Library -->
    <main class="library-scene container mx-auto" id="library-container">
        <!-- Shelves injected by JS -->
    </main>

    <!-- Contextual Popover -->
    <div id="popover" class="popover">
        <div id="network-viz"></div> <!-- Network Graph here -->
        <div class="p-5 flex-1 flex flex-col relative">
            <button onclick="closePopover()"
                class="absolute top-2 right-3 text-lg text-gray-400 hover:text-red-600">&times;</button>

            <span class="text-[9px] text-gray-500 uppercase tracking-widest mb-1 font-bold"
                id="popover-type">Type</span>
            <h3 class="font-serif text-lg font-bold leading-tight mb-2 text-shelf-dark" id="popover-title">Title</h3>

            <div class="flex items-center gap-2 mb-3 text-xs text-gray-600">
                <i class="fas fa-calendar-alt text-gold-accent"></i> <span id="popover-year">Year</span>
                <span class="mx-1">â€¢</span>
                <span id="popover-source" class="font-bold">Source</span>
            </div>

            <div class="mt-auto">
                <div class="bg-gray-100 p-2 rounded mb-3">
                    <p class="text-[8px] uppercase text-gray-400 tracking-wider">Reference DOI</p>
                    <p class="text-[10px] font-mono text-blue-600 truncate" id="popover-doi">10.1234/5678</p>
                </div>
                <!-- Link logic in JS -->
                <a href="#" target="_blank" id="popover-link"
                    class="block w-full py-2 bg-shelf-dark text-white text-center text-xs font-bold uppercase tracking-widest rounded hover:bg-gold-accent hover:text-black transition">
                    View Work
                </a>
            </div>
        </div>
    </div>

    <script src="js/library.js"></script>
</body>

</html>